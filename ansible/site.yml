---
- name: Bootstrap Arch Linux development environment
  hosts: localhost
  connection: local
  become: false

  vars:
    git_user_name: "Anton Kesy"
    git_user_email: "antonkesy@gmail.com"
    git_editor: "lvim"

  pre_tasks:
    - name: Update pacman cache
      become: true
      community.general.pacman:
        update_cache: true

  tasks:
    - name: Setup base packages
      ansible.builtin.import_tasks: tasks/base.yml
      tags: [base]

    - name: Setup AUR helpers
      ansible.builtin.import_tasks: tasks/aur-helpers.yml
      tags: [aur]

    - name: Setup filesystem utilities
      ansible.builtin.import_tasks: tasks/filesystem.yml
      tags: [filesystem]

    - name: Setup pipx
      ansible.builtin.import_tasks: tasks/pipx.yml
      tags: [pipx, python]

    - name: Setup Flatpak and apps
      ansible.builtin.import_tasks: tasks/flatpak.yml
      tags: [flatpak, apps]

    # Programming languages
    - name: Setup Python
      ansible.builtin.import_tasks: tasks/python.yml
      tags: [python, languages]

    - name: Setup Node.js
      ansible.builtin.import_tasks: tasks/node.yml
      tags: [node, languages]

    - name: Setup Go
      ansible.builtin.import_tasks: tasks/golang.yml
      tags: [golang, languages]

    - name: Setup Rust
      ansible.builtin.import_tasks: tasks/rust.yml
      tags: [rust, languages]

    - name: Setup Java
      ansible.builtin.import_tasks: tasks/java.yml
      tags: [java, languages]

    - name: Setup Haskell
      ansible.builtin.import_tasks: tasks/haskell.yml
      tags: [haskell, languages]

    - name: Setup OCaml
      ansible.builtin.import_tasks: tasks/ocaml.yml
      tags: [ocaml, languages]

    - name: Setup Lua
      ansible.builtin.import_tasks: tasks/lua.yml
      tags: [lua, languages]

    - name: Setup Dart
      ansible.builtin.import_tasks: tasks/dart.yml
      tags: [dart, languages]

    - name: Setup Racket
      ansible.builtin.import_tasks: tasks/racket.yml
      tags: [racket, languages]

    - name: Setup .NET
      ansible.builtin.import_tasks: tasks/dotnet.yml
      tags: [dotnet, languages]

    # Development tools
    - name: Setup C++ tools
      ansible.builtin.import_tasks: tasks/cpp.yml
      tags: [cpp, dev-tools]

    - name: Setup development tools
      ansible.builtin.import_tasks: tasks/dev-tools.yml
      tags: [dev-tools]

    - name: Setup Android development environment
      ansible.builtin.import_tasks: tasks/android.yml
      tags: [android, mobile]

    # Terminal and shell
    - name: Setup Zsh shell
      ansible.builtin.import_tasks: tasks/zsh.yml
      tags: [zsh, shell]

    - name: Setup terminal tools
      ansible.builtin.import_tasks: tasks/terminal.yml
      tags: [terminal, shell]

    - name: Setup Alacritty
      ansible.builtin.import_tasks: tasks/alacritty.yml
      tags: [alacritty, terminal]

    # Fonts
    - name: Setup fonts
      ansible.builtin.import_tasks: tasks/font.yml
      tags: [fonts]

    # Version control
    - name: Setup Git
      ansible.builtin.import_tasks: tasks/git.yml
      tags: [git]

    # Editors
    - name: Setup Neovim
      ansible.builtin.import_tasks: tasks/neovim.yml
      tags: [neovim, editor]

    - name: Setup LunarVim
      ansible.builtin.import_tasks: tasks/lvim.yml
      tags: [lvim, editor]

    - name: Setup Emacs
      ansible.builtin.import_tasks: tasks/emacs.yml
      tags: [emacs, editor]

    - name: Setup VS Code
      ansible.builtin.import_tasks: tasks/vscode.yml
      tags: [vscode, editor]

    - name: Setup LaTeX
      ansible.builtin.import_tasks: tasks/latex.yml
      tags: [latex]

    # Containers and virtualization
    - name: Setup Docker
      ansible.builtin.import_tasks: tasks/docker.yml
      tags: [docker]

    - name: Setup VirtualBox
      ansible.builtin.import_tasks: tasks/virtualbox.yml
      tags: [virtualbox]

    # Desktop environment
    - name: Setup desktop environment
      ansible.builtin.import_tasks: tasks/desktop.yml
      tags: [desktop]


    # Hardware and services
    - name: Setup Bluetooth
      ansible.builtin.import_tasks: tasks/bluetooth.yml
      tags: [bluetooth, hardware]

    - name: Setup NVIDIA
      ansible.builtin.import_tasks: tasks/nvidia.yml
      tags: [nvidia, hardware]

    - name: Setup fingerprint
      ansible.builtin.import_tasks: tasks/fingerprint.yml
      tags: [fingerprint, hardware]

    - name: Setup keyring
      ansible.builtin.import_tasks: tasks/keyring.yml
      tags: [keyring]

    # AI and ML
    - name: Setup Ollama
      ansible.builtin.import_tasks: tasks/ollama.yml
      tags: [ollama, ai]

    - name: Setup OpenCV
      ansible.builtin.import_tasks: tasks/opencv.yml
      tags: [opencv, ml]

    # Applications
    - name: Setup Google Chrome
      ansible.builtin.import_tasks: tasks/chrome.yml
      tags: [chrome, apps]

    - name: Setup miscellaneous apps
      ansible.builtin.import_tasks: tasks/misc.yml
      tags: [misc, apps]

    # Mobile development
    - name: Setup Flutter
      ansible.builtin.import_tasks: tasks/flutter.yml
      tags: [flutter, mobile]

    - name: Setup Unity
      ansible.builtin.import_tasks: tasks/unity.yml
      tags: [unity, gamedev]

    # Laptop specific
    - name: Setup Dell laptop tools
      ansible.builtin.import_tasks: tasks/dell-laptop.yml
      tags: [dell, laptop]

    # VPN
    - name: Setup VPN tools
      ansible.builtin.import_tasks: tasks/vpn.yml
      tags: [vpn]

    # Robotics
    - name: Setup Webots
      ansible.builtin.import_tasks: tasks/webots.yml
      tags: [webots, robotics]

    # Other tools
    - name: Setup Zint
      ansible.builtin.import_tasks: tasks/zint.yml
      tags: [zint]

    # Dotfiles (should run last after all tools are installed)
    - name: Setup dotfiles
      ansible.builtin.import_tasks: tasks/dotfiles.yml
      tags: [dotfiles]
